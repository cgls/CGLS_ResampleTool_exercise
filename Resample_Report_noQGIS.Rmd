---
title: "Copernicus Global Land Service Resampling Tool Using R"
subtitle: ""
author:
  - Xavier Rotllan-Puig:
      email: xavier.rotllan.puig@aster-projects.cat
      institute: [jrc, aster]
      correspondence: true
  - Tim Jacobs:
      institute: [vito]
  - Federico Gianoli:
      institute: [jrc]
  - Pier Lorenzo Marasco:
      institute: [jrc]
  - Michael Cherlet:
      institute: [jrc]
 
institute:
  - jrc: Joint Research Centre – European Commission. Directorate D – Sustainable Resources. Unit D6 – Knowledge for Sustainable Development & Food Security Unit. Via Enrico Fermi 2749. I-21027 Ispra (VA), ITALY
  - aster: ASTER-Projects. Barri Reboll, 9, 1r. 08694 Guardiola de Berguedà (Barcelona), SPAIN
  - vito: VITO NV. Boeretang 200. BE-2400 Mol, BELGIUM

date: "`r format(Sys.time(), '%d/%m/%Y')`"

output: 
  word_document:
    reference_docx: MS_styles.docx
    fig_caption: yes
    pandoc_args:
      - --lua-filter=scholar-metadata.lua
      - --lua-filter=author-info-blocks.lua
always_allow_html: yes
---

```{r setup, include = FALSE, results='asis'}
library(knitr)
library(pander)
library(captioner)
library(raster)
knitr::opts_chunk$set(echo = TRUE)

```

```{r include = FALSE}
if(Sys.info()[4] == "D01RI1700371"){
  path2data <- "E:/rotllxa/NDVI_resample/NDVI_data"
  path2save <- "E:/rotllxa/NDVI_resample/NDVI_resample_Europe"
}else if(Sys.info()[4] == "h05-wad.ies.jrc.it"){
  path2data <- ""
  path2save <- ""
}else if(Sys.info()[4] == "MacBook-MacBook-Pro-de-Xavier.local"){
  path2data <- "/Users/xavi_rp/Documents/D6_LPD/NDVI_data"
  path2save_LAI_Eur <- "/Users/xavi_rp/Documents/D6_LPD/NDVI_resample/LAI_resample_Europe"
  path2save_LAI_Ama <- "/Users/xavi_rp/Documents/D6_LPD/NDVI_resample/LAI_resample_amazonia"
  path2save_NDVI_Eur <- "/Users/xavi_rp/Documents/D6_LPD/NDVI_resample/NDVI_resample_Europe"
  path2save_FAPAR_Eur <- "/Users/xavi_rp/Documents/D6_LPD/NDVI_resample/FAPAR_resample_Europe"
  path2save_FAPAR_Ama <- "/Users/xavi_rp/Documents/D6_LPD/NDVI_resample/FAPAR_resample_amazonia"
  path2save_FAPAR_WAfr <- "/Users/xavi_rp/Documents/D6_LPD/NDVI_resample/FAPAR_resample_WAfrica"
  path2save_FCOVER_Eur <- "/Users/xavi_rp/Documents/D6_LPD/NDVI_resample/FCOVER_resample_Europe"
  path2save_FCOVER_Ama <- "/Users/xavi_rp/Documents/D6_LPD/NDVI_resample/FCOVER_resample_amazonia"
  path2save_DMP_Eur <- "/Users/xavi_rp/Documents/D6_LPD/NDVI_resample/DMP_resample_Europe"
  path2save_DMP_WAfr <- "/Users/xavi_rp/Documents/D6_LPD/NDVI_resample/DMP_resample_WAfrica"
}else{
  stop("Define your machine before to run LPD")
}

load(file = paste0(path2save_NDVI_Eur, "/ResampleResults_NDVI_europe_4Report.RData"), verbose = FALSE)
comp_results_NDVI_Eur <- comp_results
my_extent_eur <- my_extent
img_date_ndvi <- img_date
load(file = paste0(path2save_LAI_Eur, "/ResampleResults_LAI_europe_4Report.RData"), verbose = FALSE)
comp_results_LAI_Eur <- comp_results
load(file = paste0(path2save_LAI_Ama, "/ResampleResults_LAI_amazonia_4Report.RData"), verbose = FALSE)
comp_results_LAI_Ama <- comp_results
my_extent_ama <- my_extent
img_date_lai <- img_date
load(file = paste0(path2save_FAPAR_Ama, "/ResampleResults_fapar_amazonia_4Report.RData"), verbose = FALSE)
comp_results_FAPAR_Ama <- comp_results
img_date_fapar <- img_date
load(file = paste0(path2save_FAPAR_Eur, "/ResampleResults_fapar_europe_4Report.RData"), verbose = FALSE)
comp_results_FAPAR_Eur <- comp_results
load(file = paste0(path2save_FAPAR_WAfr, "/ResampleResults_fapar_wafrica_4Report.RData"), verbose = FALSE)
comp_results_FAPAR_WAfr <- comp_results
my_extent_wafr <- my_extent
load(file = paste0(path2save_FCOVER_Eur, "/ResampleResults_fcover_europe_4Report.RData"), verbose = FALSE)
comp_results_FCOVER_Eur <- comp_results
img_date_fcover <- img_date
load(file = paste0(path2save_FCOVER_Ama, "/ResampleResults_fcover_amazonia_4Report.RData"), verbose = FALSE)
comp_results_FCOVER_Ama <- comp_results
load(file = paste0(path2save_DMP_Eur, "/ResampleResults_dmp_europe_4Report.RData"), verbose = FALSE)
comp_results_DMP_Eur <- comp_results
img_date_dmp <- img_date
load(file = paste0(path2save_DMP_WAfr, "/ResampleResults_dmp_wafrica_4Report.RData"), verbose = FALSE)
comp_results_DMP_WAfr <- comp_results


table_num <- captioner::captioner(prefix = "Table")
fig_num <- captioner::captioner(prefix = "Figure")
#ts <- 0
```


**Abstract**



# Introduction

The Copernicus Global Land Service (CGLS; https://land.copernicus.eu/global/) is a component of the Land Monitoring Core Service (LMCS) of Copernicus, the European flagship programme on Earth Observation. CGLS systematically produces and distributes time series of global bio-geophysical products on the status and evolution of the land surface, at different spatial resolutions. These products are used to monitor the vegetation, the water cycle, the energy budget and the terrestrial cryosphere. 

The CGLS vegetation-related products (i.e. NDVI, LAI, FAPAR...), based on PROBA-V observations, have been distributed at 1km and 333m until June, 2020. However, as of July, 2020, all Near Real Time (NRT) production of the vegetation biophysical variables, based on Sentinel-3 observations, are no longer provided at 1km resolution. Nonetheless, the users who might be interested on continuing their 1km time series can use a resample of the new 333m products.

The science and production teams of the Global Land service, in support to the 1km users, provide different tools to make their own resampling exercises from the new 333m products to a 1km resolution, corresponding to the usual 1km grid. A Notebook with R code (R Core Team, 2019) and some explanations can be found at https://nbviewer.jupyter.org/github/VITObelgium/notebook-samples/blob/master/datasets/probav/ResampleTool_R_notebook.ipynb.

In this document we present a comparison of different resampled products using this R-based tool with the original CGLS products at 1km resolution for the same study area and image date.



# Materials and methods

## Data

```{r include = FALSE}
work_extent_eur <- round(as.vector(my_extent_eur), 2)
work_extent_eur <- paste(c("xmin = ", "xmax = ", "ymin = ", "ymax = "), work_extent_eur)

work_extent_ama <- round(as.vector(my_extent_ama), 2)
work_extent_ama <- paste(c("xmin = ", "xmax = ", "ymin = ", "ymax = "), work_extent_ama)

work_extent_wafr <- round(as.vector(my_extent_wafr), 2)
work_extent_wafr <- paste(c("xmin = ", "xmax = ", "ymin = ", "ymax = "), work_extent_wafr)

Sys.setlocale("LC_TIME", "C")
img_date_ndvi <- format(as.Date(img_date_ndvi), "%B %d, %Y")
img_date_lai <- format(as.Date(img_date_lai), "%B %d, %Y")
img_date_fapar <- format(as.Date(img_date_fapar), "%B %d, %Y")
img_date_fcover <- format(as.Date(img_date_fcover), "%B %d, %Y")
img_date_dmp <- format(as.Date(img_date_dmp), "%B %d, %Y")

fig_ndvi_300m_eur <- fig_num(name = "f_ndvi_300_eur", caption = "NDVI map at 333m resolution for the European-North African working extent")
orig_ndvi_300map <- paste0(path2save_NDVI_Eur, "/ndvi_300m_orig_Eur.jpg")

fig_lai_300m_ama <- fig_num(name = "f_lai_300_ama", caption = "LAI map at 333m resolution for the Amazonian working extent")
orig_lai_300map <- paste0(path2save_LAI_Ama, "/lai_300m_orig_Amaz.jpg")

fig_fapar_300m_wafr <- fig_num(name = "f_fapar_300_wafr", caption = "FAPAR map at 333m resolution for the Western Africa working extent")
orig_fapar_300map <- paste0(path2save_FAPAR_WAfr, "/fapar_300m_orig_WAfr.jpg")

Product <- c("Normalized Difference Vegetation Index", "Leaf Area Index", "Fraction of Absorbed Photosynthetically Active Radiation", "Fraction of Green Vegetation Cover", "Dry Matter Productivity")
Acronym <- c("NDVI", "LAI", "FAPAR", "FCOVER", "DMP")
Date <- c(img_date_ndvi, img_date_lai, img_date_fapar, img_date_fcover, img_date_dmp)
products_df <- data.frame(Product, Acronym, Date)
prods_df <- table_num(name = "prods_table", caption = "Products and their image date used in this assessment")

cutoff_method_df <- read.csv(paste0("/Users/xavi_rp/Documents/D6_LPD/ResampleTool_notebook", "/Table_cutoff_and_resampleMethod.csv"),
                             stringsAsFactors = FALSE,
                             header = TRUE)

cutoff_df <- table_num(name = "cutoff_table", caption = "Cutoff of valid values for each product/layer")


```

The analysis was made using different subsets of several 10-daily CGLS vegetation-related global products. See `r table_num("prods_table", display = "cite")` for the products used in this assessment, as well as their image date. 

`r kable(products_df, caption = prods_df)`
&nbsp;

The tests were made in three different areas depending on the products. Firstly, all the resampled products were tested for Europe and North Africa (coordinates in Decimal Degrees `r work_extent_eur`) in order to have a wide representation of different landscapes. Secondly, the LAI, FAPAR and FCOVER products were tested also on a subset from a tropical area in Amazonia (`r work_extent_ama`) in order to have as well a good representation of evergreen broadleaf forests (EBF). Finally, FAPAR and DMP were tested also in a western African region (`r work_extent_wafr`). The three following images show examples of the 333m working maps used for the resample tests for the different study areas (`r fig_num("f_ndvi_300_eur", display = "cite")`, `r fig_num("f_lai_300_ama", display = "cite")` and `r fig_num("f_fapar_300_wafr", display = "cite")`).

![`r fig_ndvi_300m_eur`](`r orig_ndvi_300map`)

![`r fig_lai_300m_ama`](`r orig_lai_300map`)

![`r fig_fapar_300m_wafr`](`r orig_fapar_300map`)
&nbsp;

The original Global Land product files usually can be downloaded as a netCDF4 file. They can often contain specific values for invalid pixels (flagged values), which need to be dealt with. In the case of the NDVI products, for example, digital values in the netCDF (DN) larger than 250 are flagged and need to be converted to NA (No Data). When the netCDF files are read in as a raster object, the digital values are scaled into real NDVI values automatically. Therefore, after reading the files, all pixels with NDVI values larger than 0.92 (= DN 250 x scale + offset) were set to NA. In the same way, all the other products' non-valid values were transformed to NAs according to their valid ranges, which can be seen in `r table_num("cutoff_table", display = "cite")`. In addition, other supporting information of each product can be found both in the netCDF file metadata and in their Product User Manual at https://land.copernicus.eu/global/products/. 

`r kable(cutoff_method_df[, c(1:3, 5:8)], caption = cutoff_df)`
&nbsp;




## Resample method
```{r echo = FALSE}
method_df <- table_num(name = "method_table", caption = "Best suited method recommended for each product/layer.")

```


There are several approaches to resample data from a finer to a coarser resolution. They can be grouped into area-based aggregation methods and point-based interpolation methods (e.g. Bilinear and Nearest Neighbour), and can be applied depending on the data type and other considerations. Preliminary tests run on NDVI products, although not showed in this document, gave nearly equal results for both approaches.

The area-based aggregation method used in this assessment groups rectangular matrix of pixels of the finer resolution image to create a new map with larger cells. In this case, as we wanted to resample from 333m to 1km, a factor of 3 was implemented (i.e. a matrix of 3x3 pixels).

To run the resample, we used the function *aggregate()* of the package *raster* (Hijmans, 2019). *aggregate()* can perform the calculation using different functions. While the default is the average (*mean()*) it can work also with *modal()*, *max()*, *min()* or even with *ad hoc* functions programmed by the user. For all the products tested the most suitable method is the average. `r table_num("method_table", display = "cite")` shows a recommendation of the best suited method for each product/layer. In addition, as it is also recommended in the tool, it was included the condition that at least 5 out of the 9 pixels had to have valid values (i.e. not NA) to return a valid value for the resampled pixel.


`r pander(cutoff_method_df[, c(1:3, 9)], caption = method_df)`
**Note:** \* QFLAG, LENGTH_BEFORE/AFTER and NOBS cannot be resampled due to different implementations for 1km-v2 and 300m-v1 products. For example, LAI-NOBS ranges are 0-120 for 1km-v2 and 0-40 for 300m-v1, or LAI/FAPAR/FCOVER-LENGTH_BEFORE go up to 60 days and up to 210 days, respectively for both products. **this can be expanded with more explanations!!!!!**
&nbsp;


## Metrics and plots

In order to assess the performance of the resampling methods, besides mapping the results, three well known and widely used metrics and a scatterplot were produced. The metrics are:

* Pearson correlation coefficient (Pearson's *r*)

* Root-mean-square error (RMSE)

* Mean absolute error (MAE) 

In addition, a map representing the spatial distribution of the bigger (> 95^th^ percentile) absolute errors (|original1km – resampled1km|) was also generated to observe possible spatial patterns of the errors for the NDVI resampled product.  

The R code used to perform the assessment reported in this document can be seen at https://github.com/xavi-rp/NDVI_resample. 
&nbsp;



# Results

```{r include = FALSE}
comp_results <- comp_results_NDVI_Eur[1, ]
comp_results <- rbind(comp_results, comp_results_LAI_Eur, comp_results_LAI_Ama[1, ], comp_results_FAPAR_Eur, comp_results_FAPAR_Ama, comp_results_FAPAR_WAfr, comp_results_FCOVER_Eur, comp_results_FCOVER_Ama, comp_results_DMP_Eur, comp_results_DMP_WAfr)
comp_results[, 2:4] <- round(comp_results[, 2:4], 3)
comp_results[1:10, 1] <- c("NDVI_Europe/NorthAfrica",
                          #"NDVI_Europe/NorthAfrica_QGIS/Python", "NDVI_Eur/NorthAf_R_vs_QGIS/Python", 
                          "LAI_Europe/NorthAfrica", "LAI_Amazonia",
                          "FAPAR_Europe/NorthAfrica", "FAPAR_Amazonia", "FAPAR_WesternAfrica", 
                          "FCOVER_Europe/NorthAfrica","FCOVER_Amazonia",
                          "DMP_Europe/NorthAfrica", "DMP_WesternAfrica")
names(comp_results) <-c("Assessment", "Pearson's *r*", "RMSE", "MAE")

comp_results_df <- table_num(name = "comp_results_table", caption = "Pearson's *r*, Root Mean Square Error (RMSE) and Mean Absolute Error (MAE) of each case study")

```

In this document we present several assessments depending on the CGLS product analysed, the area of study and the resampling tool in use. `r table_num("comp_results_table", display = "cite")` summarizes the three metrics calculated in each assessment, so that an overview of all the cases is provided. In the following subsections each case will be developed separately and in more detail. 

`r pander(comp_results, caption = comp_results_df)`
&nbsp;



## NDVI resampled vs the original 1km product: Europe/North Africa

```{r echo = FALSE}
fig_1km_1km_Raggr_NDVI_eur <- fig_num(name = "f_1km_1km_Raggr_NDVI_eur", caption = "Original NDVI map at 1km resolution and the resampled one using the R-based tool for Europe/North Africa")
orig_Raggr_NDVI_eur <- paste0(path2save_NDVI_Eur, "/ndvi1km_1kmResampled_RAggr.jpg")

fig_1km_1km_Raggr_NDVI_eur_scat <- fig_num(name = "f_1km_1km_Raggr_NDVI_eur_scat", caption = "Scatter plot displaying a random subset (1%) of pixel values of the 1km original NDVI product against the values of the same pixels of the resampled map using the R tool (blue points) for Europe/North Africa. Also the regression (red) line")
orig_Raggr_NDVI_eur_scat <- paste0(path2save_NDVI_Eur, "/resample_correlation_RAggr.jpg")

fig_1km_1km_Raggr_NDVI_eur_errors <- fig_num(name = "f_1km_1km_Raggr_NDVI_eur_errors", caption = "Spatial pattern of the Absolute Errors larger than their 95^th^ percentile for Europe/North Africa")
orig_Raggr_NDVI_eur_errors <- paste0(path2save_NDVI_Eur, "/ndvi1km_1kmResampled_RAggr_errors.jpg")

```


To have a first impression of the results of the resample tool, `r fig_num("f_1km_1km_Raggr_NDVI_eur", display = "cite")` shows both the original NDVI map at 1km resolution for the region of study (Europe and North Africa) and the resampled one to 1km using the R-based tool. 

![`r fig_1km_1km_Raggr_NDVI_eur`](`r orig_Raggr_NDVI_eur`)
&nbsp;

As it can be seen in the scatterplot (`r fig_num("f_1km_1km_Raggr_NDVI_eur_scat", display = "cite")`), and corroborated by the Pearson correlation coefficient (Pearson's *r* = `r comp_results[1, 2]`; `r table_num("comp_results_table", display = "cite")`), there was a good level of correlation between the original 1km map and the resampled one using the R tool. In addition, considering that NDVI values ranged from -0.08	to 0.92, also RMSE and MAE reported good levels of error between the two maps (`r paste0(comp_results[1, 3], " and ", comp_results[1, 4], ", respectively")`).


![`r fig_1km_1km_Raggr_NDVI_eur_scat`](`r orig_Raggr_NDVI_eur_scat`)
&nbsp;


Finally, `r fig_num("f_1km_1km_Raggr_NDVI_eur_errors", display = "cite")` shows how not a particular spatial pattern of the largest (> 0.103) absolute errors could be observed in the study area. 

![`r fig_1km_1km_Raggr_NDVI_eur_errors`](`r orig_Raggr_NDVI_eur_errors`)
&nbsp;


## LAI resampled vs the original 1km product: Europe/North Africa

```{r echo = FALSE}
fig_1km_1km_Raggr_LAI_eur <- fig_num(name = "f_1km_1km_Raggr_LAI_eur", caption = "Original LAI map at 1km resolution and the resampled one using the R-based tool for Europe/North Africa")
orig_Raggr_LAI_eur <- paste0(path2save_LAI_Eur, "/lai1km_1kmResampled_RAggr.jpg")

fig_1km_1km_Raggr_LAI_eur_scat <- fig_num(name = "f_1km_1km_Raggr_LAI_eur_scat", caption = "Scatter plot displaying a random subset (1%) of pixel values of the 1km original LAI product against the values of the same pixels of the resampled map using the R tool (blue points) for Europe/North Africa. Also the regression (red) line")
orig_Raggr_LAI_eur_scat <- paste0(path2save_LAI_Eur, "/resample_correlation_RAggr.jpg")

```


The resulting resampled map of the R-based tool for LAI in the study area of Europe and North Africa, together with the original 1km map, can both be seen in `r fig_num("f_1km_1km_Raggr_LAI_eur", display = "cite")`. 

![`r fig_1km_1km_Raggr_LAI_eur`](`r orig_Raggr_LAI_eur`)
&nbsp;

As it can be observed, the scatterplot (`r fig_num("f_1km_1km_Raggr_LAI_eur_scat", display = "cite")`) and the correlation coefficient (Pearson's *r* = `r comp_results[2, 2]`; `r table_num("comp_results_table", display = "cite")`) showed a good level of correlation between the original 1km map and the resampled one using the R-based tool, although slightly lower than the results of the NDVI product in the same region. In addition, considering that LAI values ranged from 0 to 7, also RMSE and MAE reported good values between the two maps (`r paste0(comp_results[2, 3], " and ", comp_results[2, 4], ", respectively")`). 

![`r fig_1km_1km_Raggr_LAI_eur_scat`](`r orig_Raggr_LAI_eur_scat`)
&nbsp;




## LAI resampled vs the original 1km product: Amazonia

```{r echo = FALSE}
fig_1km_1km_Raggr_LAI_ama <- fig_num(name = "f_1km_1km_Raggr_LAI_ama", caption = "Original LAI map at 1km resolution and the resampled one using the R-based tool for the Amazonian study area")
orig_Raggr_LAI_ama <- paste0(path2save_LAI_Ama, "/lai1km_1kmResampled_RAggr.jpg")

fig_1km_1km_Raggr_LAI_ama_scat <- fig_num(name = "f_1km_1km_Raggr_LAI_ama_scat", caption = "Scatter plot displaying a random subset (1%) of pixel values of the 1km original LAI product against the values of the same pixels of the resampled map using the R tool (blue points) for the Amazonian region. Also the regression (red) line")
orig_Raggr_LAI_ama_scat <- paste0(path2save_LAI_Ama, "/resample_correlation_RAggr.jpg")

```


In `r fig_num("f_1km_1km_Raggr_LAI_ama", display = "cite")`, showing both the original 1km map and the resampled one using the R-based tool for LAI in the Amazonian study area, it can already be seen that the tool’s performance for the tropical areas (EBF) is lower than for non-EBF areas.

![`r fig_1km_1km_Raggr_LAI_ama`](`r orig_Raggr_LAI_ama`)
&nbsp;

Both the scatterplot (`r fig_num("f_1km_1km_Raggr_LAI_ama_scat", display = "cite")`) and the statistics corroborated the worse results than for other areas and/or products. While Pearson's *r* was `r comp_results[3, 2]`, RMSE and MAE were `r comp_results[3, 3]` and `r comp_results[3, 4]`, respectively (`r table_num("comp_results_table", display = "cite")`). As preliminary tests, also 95^th^ percentile and median were tested instead of the average, giving both lower Pearson's correlations (`r round(comp_results_LAI_Ama[2, 2], 3)` and `r round(comp_results_LAI_Ama[3, 2], 3)`, respecitely).

![`r fig_1km_1km_Raggr_LAI_ama_scat`](`r orig_Raggr_LAI_ama_scat`)
&nbsp;

These poorer results might be mainly due to the differences in the temporal composition and the cloud gap filling method used for the production of the 1km and the 300m products. In this sense, for the former, a more complex algorithm was implemented in the processing chain in order to improve the final generated 10-day vegetation-related global product, especially in EBFs, such is the case for the Amazonian rainforest. 




## FAPAR resampled vs the original 1km product: Europe/North Africa

```{r echo = FALSE}
fig_1km_1km_Raggr_FAPAR_eur <- fig_num(name = "f_1km_1km_Raggr_FAPAR_eur", caption = "Original FAPAR map at 1km resolution and the resampled one using the R-based tool for the European and north African study area")
orig_Raggr_FAPAR_eur <- paste0(path2save_FAPAR_Eur, "/lai1km_1kmResampled_RAggr.jpg")

fig_1km_1km_Raggr_FAPAR_eur_scat <- fig_num(name = "f_1km_1km_Raggr_FAPAR_eur_scat", caption = "Scatter plot displaying a random subset (1%) of pixel values of the 1km original FAPAR product against the values of the same pixels of the resampled map using the R tool (blue points) for the European/North African region. Also the regression (red) line")
orig_Raggr_FAPAR_eur_scat <- paste0(path2save_FAPAR_Eur, "/resample_correlation_RAggr.jpg")

```


`r fig_num("f_1km_1km_Raggr_FAPAR_eur", display = "cite")` shows the original 1km map as well as the resampled one using the R-based tool for FAPAR in the European/North African study area.

![`r fig_1km_1km_Raggr_FAPAR_eur`](`r orig_Raggr_FAPAR_eur`)
&nbsp;

Both the statistics (Pearson's *r* = `r comp_results[4, 2]`, RMSE = `r comp_results[3, 3]`and MAE = `r comp_results[4, 4]`) and the scatterplot (`r fig_num("f_1km_1km_Raggr_FAPAR_eur_scat", display = "cite")`) showed good results of the resample, in line with NDVI and a bit larger then LAI for the same region.  

![`r fig_1km_1km_Raggr_FAPAR_eur_scat`](`r orig_Raggr_FAPAR_eur_scat`)
&nbsp;


## FAPAR resampled vs the original 1km product: Amazonia




# Conclusions

After the discontinuity on the supply of NRT vegetation-related products at 1km resolution, the Global Land service has made available two resample tools based on different programming languages (i.e. R and QGIS/Python) in order to ease the users to keep producing their own time series at that resolution. In this document we show several assessments made on the performance of these two tools in resampling different 300m products (i.e. NDVI and LAI) and in different landscape typologies (i.e. EBF and non-EBF).

The results showed similar and good performance of the two tools in non-EBF landscapes, both for NDVI and for LAI products. In contrast, the evaluation of the resample results of LAI in an EBF area in the Amazonia gave poorer results. This fact is likely due to the different algorithm implemented in the production of the 10-day vegetation-related global products at 1km and 300m resolution. In light of this, the users must be aware of these differences when using these two tools or any other resampling approach. 



# References

Hijmans, R.J. 2019. raster: Geographic Data Analysis and Modeling. R package version 3.0-2. https://CRAN.R-project.org/package=raster

QGIS Development Team. 2009. QGIS Geographic Information System. Open Source Geospatial Foundation. URL http://qgis.org

R Core Team. 2019. R: A language and environment for statistical computing. R Foundation for Statistical Computing, Vienna, Austria. URL https://www.R-project.org/.

Van Rossum, G. & Drake, F.L. 2009. Python 3 Reference Manual, Scotts Valley, CA: CreateSpace.


